(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6134:(e,s,t)=>{Promise.resolve().then(t.bind(t,6490))},6490:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>R});var a=t(5155),r=t(2115),l=t(4624),n=t(2085),i=t(2596),c=t(9688);function o(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,c.QP)((0,i.$)(s))}let m=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,s)=>{let{className:t,variant:r,size:n,asChild:i=!1,...c}=e,d=i?l.DX:"button";return(0,a.jsx)(d,{className:o(m({variant:r,size:n,className:t})),ref:s,...c})});d.displayName="Button";let x=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:o("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});x.displayName="Card",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:o("flex flex-col space-y-1.5 p-6",t),...r})}).displayName="CardHeader",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:o("text-2xl font-semibold leading-none tracking-tight",t),...r})}).displayName="CardTitle",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:o("text-sm text-muted-foreground",t),...r})}).displayName="CardDescription";let h=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:o("p-6 pt-0",t),...r})});h.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:o("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter";var u=t(4616),g=t(381),p=t(1539),b=t(5996),f=t(5273),w=t(2152),j=t(7434),N=t(7654),v=t(4516),y=t(9588),k=t(8979),T=t(7550),S=t(133),A=t(9420),C=t(646),D=t(4861);function R(){var e;let[s,t]=(0,r.useState)("modeSelect"),[l,n]=(0,r.useState)(null),[i,c]=(0,r.useState)(null),[o,m]=(0,r.useState)(null),[R,z]=(0,r.useState)({name:"",phone:"",address:"",symptom:""}),[_,P]=(0,r.useState)({name:"",phone:""}),[O,E]=(0,r.useState)(""),[M,F]=(0,r.useState)(null),[I,L]=(0,r.useState)("대기 중"),[J,U]=(0,r.useState)(!1),[W,H]=(0,r.useState)(""),[B,Q]=(0,r.useState)(""),[V,X]=(0,r.useState)(""),[$,q]=(0,r.useState)("원하시는 모드를 선택해주세요"),[G,K]=(0,r.useState)(!1),[Y,Z]=(0,r.useState)({stt:!1,llm:!1,tts:!1}),[ee,es]=(0,r.useState)(!1),[et,ea]=(0,r.useState)(0),[er,el]=(0,r.useState)(0),en=(0,r.useRef)(null),ei=(0,r.useRef)([]),ec=(0,r.useRef)(null),eo=(0,r.useRef)(null),em=(0,r.useRef)(null),ed=(0,r.useRef)(null),[ex,eh]=(0,r.useState)(""),[eu,eg]=(0,r.useState)(0),ep=(0,r.useRef)(50);(0,r.useEffect)(()=>{if(B&&(B!==ex&&0===eu&&eh(""),eu<B.length)){let e=setTimeout(()=>{let e=B.indexOf(". ",eu);-1===e&&(e=B.indexOf(", ",eu)),-1===e&&(e=B.indexOf("? ",eu)),-1===e&&(e=B.indexOf("! ",eu));let s=-1!==e?e+2:B.length;eh(B.substring(0,s)),eg(s),ep.current,ep.current=Math.max(30,.95*ep.current)},ep.current);return()=>clearTimeout(e)}},[B,ex,eu]),(0,r.useEffect)(()=>{B&&(eg(0),ep.current=50)},[B]);let eb=async()=>{if(!0!==o)try{let e=await fetch("/api/health"),s=await e.json();Z(s)}catch(e){Z({stt:!1,llm:!1,tts:!1})}};(0,r.useEffect)(()=>{if(!1===o){eb();let e=setInterval(eb,1e4);return()=>clearInterval(e)}},[o]);let ef=()=>{eo.current&&(eo.current.pause(),eo.current.currentTime=0),ed.current&&(clearTimeout(ed.current),ed.current=null),es(!1),X("")},ew=e=>{ef(),m(e),t("start"),q("화면을 눌러 서비스를 시작해주세요")},ej=async()=>{ef(),t("main");let e=o?"시뮬레이션 모드입니다. 원하시는 서비스를 선택하거나 음성으로 말씀해주세요.":"병원 안내 키오스크입니다. 원하시는 서비스를 선택하거나 음성으로 말씀해주세요.";q(e),await eN(e)},eN=async e=>{if(ef(),es(!0),X("\uD83D\uDD0A 음성 안내 중..."),o){ed.current=setTimeout(()=>{X("✅ 음성 안내 완료"),es(!1),setTimeout(()=>X(""),3e3)},2e3);return}try{let s=await fetch("/api/speak",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e})});if(!s.ok)throw Error("HTTP error! Status: ".concat(s.status));let t=await s.json();if(t.simulated){ed.current=setTimeout(()=>{X("✅ 음성 안내 완료"),es(!1),setTimeout(()=>X(""),3e3)},2e3);return}if(t.audio_path&&eo.current)try{eo.current.src="/api/audio?path=".concat(t.audio_path),eo.current.load();let e=eo.current.play();void 0!==e&&e.catch(e=>{console.error("Audio playback failed:",e),X("✅ 음성 안내 완료"),es(!1),setTimeout(()=>X(""),3e3)}),eo.current.onended=()=>{X("✅ 음성 안내 완료"),es(!1),setTimeout(()=>X(""),3e3)}}catch(e){console.error("Audio error:",e),X("✅ 음성 안내 완료"),es(!1),setTimeout(()=>X(""),3e3)}else ed.current=setTimeout(()=>{X("✅ 음성 안내 완료"),es(!1),setTimeout(()=>X(""),3e3)},2e3)}catch(e){console.error("TTS error:",e),X("✅ 음성 안내 완료"),es(!1),setTimeout(()=>X(""),3e3)}},ev=async e=>{ef(),n(e),t("service");let s="",a=null;switch(e){case"reception":s="접수를 시작하겠습니다. 성함을 말씀해주세요.",a="name";break;case"lookup":s="접수 내역을 확인하겠습니다. 성함을 말씀해주세요.",a="lookupName";break;case"direction":s="어느 곳으로 가시나요? (진료과, 수납창구, 약국, 주차장 등을 말씀해주세요)",a="direction"}c(a),q(s),await eN(s)},ey=async e=>{ef(),l&&i&&("reception"===l?await ek(e):"lookup"===l?await eT(e):"direction"===l&&await eS(e))},ek=async e=>{switch(i){case"name":z(s=>({...s,name:e})),q("".concat(e,"님, 맞습니까?")),await eN("".concat(e,"님, 맞습니까?")),c("confirmName");break;case"confirmName":let s=await eA(e);if("긍정"===s)el(0),q("전화번호를 말씀해주세요."),await eN("전화번호를 말씀해주세요."),c("phone");else if("부정"===s){if(el(e=>e+1),er>=2){await eR("입력 오류가 반복되었습니다. 직원을 호출하겠습니다.");return}q("다시 성함을 말씀해주세요."),await eN("다시 성함을 말씀해주세요."),c("name")}else q("잘 이해하지 못했습니다. 맞으면 '네', 아니면 '아니오'라고 말씀해주세요."),await eN("잘 이해하지 못했습니다. 맞으면 '네', 아니면 '아니오'라고 말씀해주세요.");break;case"phone":z(s=>({...s,phone:e})),q("".concat(e," 번호가 맞습니까?")),await eN("".concat(e," 번호가 맞습니까?")),c("confirmPhone");break;case"confirmPhone":let t=await eA(e);if("긍정"===t)el(0),q("주소를 말씀해주세요."),await eN("주소를 말씀해주세요."),c("address");else if("부정"===t){if(el(e=>e+1),er>=2){await eR("입력 오류가 반복되었습니다. 직원을 호출하겠습니다.");return}q("다시 전화번호를 말씀해주세요."),await eN("다시 전화번호를 말씀해주세요."),c("phone")}else q("잘 이해하지 못했습니다. 맞으면 '네', 아니면 '아니오'라고 말씀해주세요."),await eN("잘 이해하지 못했습니다. 맞으면 '네', 아니면 '아니오'라고 말씀해주세요.");break;case"address":z(s=>({...s,address:e})),q("".concat(e," 주소가 맞습니까?")),await eN("".concat(e," 주소가 맞습니까?")),c("confirmAddress");break;case"confirmAddress":let a=await eA(e);if("긍정"===a)el(0),q("불편하신 증상을 말씀해주세요."),await eN("불편하신 증상을 말씀해주세요."),c("symptom");else if("부정"===a){if(el(e=>e+1),er>=2){await eR("입력 오류가 반복되었습니다. 직원을 호출하겠습니다.");return}q("다시 주소를 말씀해주세요."),await eN("다시 주소를 말씀해주세요."),c("address")}else q("잘 이해하지 못했습니다. 맞으면 '네', 아니면 '아니오'라고 말씀해주세요."),await eN("잘 이해하지 못했습니다. 맞으면 '네', 아니면 '아니오'라고 말씀해주세요.");break;case"symptom":z(s=>({...s,symptom:e}));let r=await eC("증상: ".concat(e),"triage_step1"),l=r.match(/([가-힣]+과)/);E(l?l[1]:"해당 진료과");let n="".concat(r,"\n\n이 진료과로 접수해 드릴까요?");q(n),await eN(n),c("confirmTriage");break;case"confirmTriage":let o=await eA(e);if("긍정"===o){F({dept:O,date:"2025년 7월 29일",time:"오전 10시"});let e=await eC("".concat(R.name,"님 ").concat(O,"로 접수해 주세요"),"triage_step2");q(e),await eN(e),c("finish")}else"부정"===o?(q("접수를 원하지 않으시면 처음부터 다시 진행해 주세요."),await eN("접수를 원하지 않으시면 처음부터 다시 진행해 주세요."),eE()):(q("잘 이해하지 못했습니다. 접수 원하시면 '네'라고 말씀해주세요."),await eN("잘 이해하지 못했습니다. 접수 원하시면 '네'라고 말씀해주세요."));break;case"finish":let m=await eC(e,"triage_step2");q(m),await eN(m)}},eT=async e=>{switch(i){case"lookupName":P(s=>({...s,name:e})),q("".concat(e,"님, 전화번호를 말씀해주세요.")),await eN("".concat(e,"님, 전화번호를 말씀해주세요.")),c("lookupPhone");break;case"lookupPhone":P(s=>({...s,phone:e}));let s=await eC("이름: ".concat(_.name,", 전화번호: ").concat(e),"lookup");q(s),await eN(s),c("showResult");break;case"showResult":eE()}},eS=async e=>{switch(i){case"direction":let s=await eC("".concat(e," 어디에 있나요?"),"direction");q(s),await eN(s),c("showDirection");break;case"showDirection":eE()}},eA=async e=>{if(o)return["네","예","맞아","맞습니다","응","좋아","해줘","그래"].some(s=>e.includes(s))?"긍정":["아니","아니오","틀려","틀렸어","싫어","안돼"].some(s=>e.includes(s))?"부정":"모르겠음";try{let s=await eC(e,"classify");return s.includes("긍정")?"긍정":s.includes("부정")?"부정":"모르겠음"}catch(e){return"모르겠음"}},eC=async(e,s)=>{if(U(!0),L("AI 처리 중..."),H(e),Q(""),o)return await eD(e,s);try{let t=new WebSocket("ws://localhost:8000/ws/kiosk");return ec.current=t,new Promise((a,r)=>{let l=setTimeout(()=>{t.readyState!==WebSocket.OPEN&&(t.close(),a(eD(e,s)))},3e3);t.onopen=()=>{clearTimeout(l),L("AI 응답 생성 중..."),t.send(JSON.stringify({text:e,type:s}))},t.onmessage=e=>{let s=JSON.parse(e.data);"llm"===s.stage&&s.text&&(Q(s.text),a(s.text))},t.onerror=()=>{clearTimeout(l),a(eD(e,s))}})}catch(t){return console.error("LLM processing error:",t),await eD(e,s)}finally{U(!1)}},eD=async(e,s)=>{switch(await new Promise(e=>setTimeout(e,2e3)),s){case"triage_step1":if(e.includes("머리")||e.includes("두통"))return"그런 증상은 신경과가 적절합니다.";if(e.includes("배")||e.includes("복통"))return"내과를 추천드립니다.";if(e.includes("다리")||e.includes("무릎"))return"정형외과를 추천드립니다.";else return"내과를 추천드립니다.";case"triage_step2":return"접수가 완료되었습니다. ".concat(O,"는 본관 3층에 위치해 있으며, 예상 대기시간은 약 20분입니다. 대기번호는 5번입니다.");case"lookup":return"".concat(_.name,"님은 2025년 7월 29일 오전 10시에 내과로 접수되어 있습니다. 현재 대기번호는 3번이며, 예상 대기시간은 약 15분입니다.");case"direction":if(e.includes("내과"))return"내과는 본관 2층에 위치해 있습니다. 엘리베이터를 타고 2층에서 내려서 오른쪽으로 가시면 됩니다.";if(e.includes("수납"))return"수납창구는 1층 로비 왼쪽에 있습니다.";if(e.includes("주차"))return"주차장은 지하 1층과 2층에 있습니다. 지하 주차장 입구는 병원 뒤편에 있습니다.";else return"죄송합니다. 구체적인 위치를 말씀해주시면 더 정확한 안내를 드릴 수 있습니다.";default:return"죄송합니다. 다시 한 번 말씀해주세요."}},eR=async e=>{if(ea(e=>e+1),et>=2)q("죄송합니다. 직원을 호출하겠습니다. 잠시만 기다려주세요."),L("직원 호출 중..."),await eN("죄송합니다. 직원을 호출하겠습니다. 잠시만 기다려주세요."),setTimeout(()=>{L("직원이 곧 도착합니다"),ea(0),eE()},3e3);else{let e=["죄송합니다. 다시 한 번 말씀해주세요.","잘 들리지 않았습니다. 다시 말씀해주시거나 화면의 버튼을 눌러주세요."][et-1];q(e),await eN(e)}U(!1)},ez=async()=>{console.log("startRecording 함수 호출됨"),ef();try{if(K(!0),L("마이크 권한 요청 중..."),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){console.error("getUserMedia not supported"),await eR("이 브라우저에서는 음성 녹음이 지원되지 않습니다"),K(!1);return}console.log("마이크 권한 요청 중...");let e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}});console.log("마이크 권한 획득 성공");let s=new MediaRecorder(e,{mimeType:MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":"audio/mp4"});en.current=s,ei.current=[],s.ondataavailable=e=>{console.log("Audio data available:",e.data.size),e.data.size>0&&ei.current.push(e.data)},s.onstop=()=>{console.log("MediaRecorder stopped");let t=s.mimeType||"audio/webm",a=new Blob(ei.current,{type:t}),r=new File([a],"recording.wav",{type:"audio/wav"});eP(r),e.getTracks().forEach(e=>e.stop())},s.onerror=s=>{console.error("MediaRecorder error:",s),eR("녹음 중 오류가 발생했습니다"),K(!1),e.getTracks().forEach(e=>e.stop())},console.log("녹음 시작"),s.start(1e3),L("\uD83C\uDFA4 녹음 중... 말씀해주세요"),em.current=setTimeout(()=>{console.log("10초 자동 중지"),"recording"===s.state&&(s.stop(),K(!1))},1e4)}catch(e){console.error("Recording error:",e),K(!1),"NotAllowedError"===e.name?await eR("마이크 사용 권한을 허용해주세요"):"NotFoundError"===e.name?await eR("마이크를 찾을 수 없습니다"):await eR("음성 녹음을 시작할 수 없습니다")}},e_=()=>{console.log("stopRecording 함수 호출됨"),en.current&&G?(console.log("녹음 중지 중..."),en.current.stop(),K(!1),L("음성 처리 중..."),em.current&&(clearTimeout(em.current),em.current=null)):console.log("녹음 중이 아니거나 MediaRecorder가 없음")},eP=async e=>{U(!0),L("음성 처리 중...");try{let s=new FormData;s.append("file",e);let t=await fetch("/api/upload-audio",{method:"POST",body:s});if(!t.ok)throw Error("HTTP error! Status: ".concat(t.status));let a=await t.json();if(o||a.simulated){await eO();return}let r=new WebSocket("ws://localhost:8000/ws/kiosk");ec.current=r;let l=setTimeout(()=>{r.readyState!==WebSocket.OPEN&&(r.close(),eO())},3e3);r.onopen=()=>{clearTimeout(l),L("음성 인식 중..."),r.send(JSON.stringify({file_id:a.file_id}))},r.onmessage=e=>{let s=JSON.parse(e.data);"stt"===s.stage&&s.text&&ey(s.text)},r.onerror=()=>{clearTimeout(l),eO()}}catch(e){console.error("Upload error:",e),await eR("음성 처리 중 오류가 발생했습니다")}finally{U(!1)}},eO=async()=>{await new Promise(e=>setTimeout(e,2e3));let e=["김철수","네","010-1234-5678","서울시 강남구","머리가 아파요","접수 문의드립니다","내과 어디에 있나요"],s=e[Math.floor(Math.random()*e.length)];H(s),await ey(s)},eE=()=>{ef(),t("main"),n(null),c(null),L("대기 중"),U(!1),H(""),Q(""),X(""),eh(""),ea(0),el(0),z({name:"",phone:"",address:"",symptom:""}),P({name:"",phone:""}),E(""),F(null),q("원하시는 서비스를 선택하거나 음성으로 말씀해주세요.")};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-green-100 relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,a.jsx)("div",{className:"floating-orb floating-orb-1"}),(0,a.jsx)("div",{className:"floating-orb floating-orb-2"}),(0,a.jsx)("div",{className:"floating-orb floating-orb-3"})]}),(0,a.jsxs)("div",{className:"relative z-10 h-screen flex flex-col",children:[(0,a.jsx)("div",{className:"bg-white/90 backdrop-blur-md border-b border-green-200/50 p-3 sm:p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-800 flex items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-green-600 rounded flex items-center justify-center",children:(0,a.jsx)(u.A,{className:"w-4 h-4 sm:w-6 sm:h-6 text-white stroke-[3]"})}),"병원 안내 키오스크"]}),l&&i&&(0,a.jsx)("div",{className:"mt-1 text-sm sm:text-base text-green-700 bg-green-50 px-3 py-1 rounded-md inline-block",children:l&&i&&(null===(e=({reception:{name:"성함 입력",confirmName:"성함 확인",phone:"전화번호 입력",confirmPhone:"전화번호 확인",address:"주소 입력",confirmAddress:"주소 확인",symptom:"증상 입력",confirmTriage:"진료과 확인",finish:"접수 완료"},lookup:{lookupName:"성함 입력",lookupPhone:"전화번호 입력",showResult:"접수 내역 확인"},direction:{direction:"목적지 입력",showDirection:"길안내 완료"}})[l])||void 0===e?void 0:e[i])||""}),!0===o&&(0,a.jsx)("div",{className:"mt-1 text-xs text-amber-600 bg-amber-50 px-2 py-1 rounded-md inline-block",children:"\uD83C\uDFAD 시뮬레이션 모드"}),!1===o&&(0,a.jsx)("div",{className:"mt-1 text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded-md inline-block",children:"\uD83D\uDD17 실제 서버 모드"})]})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col p-3 sm:p-4 space-y-3 sm:space-y-4 overflow-y-auto",children:["modeSelect"===s&&(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsx)(x,{className:"glass-card w-full max-w-lg hover-lift",children:(0,a.jsxs)(h,{className:"p-6 sm:p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce-gentle",children:(0,a.jsx)(g.A,{className:"w-8 h-8 sm:w-10 sm:h-10 text-white stroke-[3]"})}),(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-2",children:"모드 선택"}),(0,a.jsx)("p",{className:"text-base sm:text-lg text-gray-600",children:"원하시는 모드를 선택해주세요"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(d,{onClick:()=>ew(!0),size:"lg",className:"kiosk-button w-full h-16 sm:h-20 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white shadow-lg hover:shadow-xl transition-all duration-300",children:(0,a.jsxs)("div",{className:"flex items-center justify-start w-full",children:[(0,a.jsx)(p.A,{className:"w-6 h-6 sm:w-8 sm:h-8 mr-4 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:"text-lg sm:text-xl font-bold",children:"\uD83C\uDFAD 시뮬레이션 모드"}),(0,a.jsx)("div",{className:"text-sm sm:text-base opacity-90",children:"데모 및 테스트용 (서버 연결 불필요)"})]})]})}),(0,a.jsx)(d,{onClick:()=>ew(!1),size:"lg",className:"kiosk-button w-full h-16 sm:h-20 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white shadow-lg hover:shadow-xl transition-all duration-300",children:(0,a.jsxs)("div",{className:"flex items-center justify-start w-full",children:[(0,a.jsx)(g.A,{className:"w-6 h-6 sm:w-8 sm:h-8 mr-4 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:"text-lg sm:text-xl font-bold",children:"\uD83D\uDD17 실제 서버 모드"}),(0,a.jsx)("div",{className:"text-sm sm:text-base opacity-90",children:"실제 AI 서버와 연동 (운영용)"})]})]})})]}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"모드 설명"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 space-y-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"시뮬레이션 모드:"})," 미리 정의된 응답으로 키오스크 기능을 체험할 수 있습니다."]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"실제 서버 모드:"})," STT, LLM, TTS 서버와 실시간으로 연동하여 실제 음성 인식과 AI 응답을 제공합니다."]})]})]})]})})}),"start"===s&&(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsx)(x,{className:"glass-card w-full max-w-md hover-lift",children:(0,a.jsxs)(h,{className:"p-6 sm:p-8 text-center",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce-gentle",children:(0,a.jsx)(b.A,{className:"w-8 h-8 sm:w-10 sm:h-10 text-white stroke-[3]"})}),(0,a.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-700 mb-2",children:o?"시뮬레이션 모드":"실제 서버 모드"}),(0,a.jsx)("p",{className:"text-base sm:text-lg text-gray-600",children:"화면을 눌러 서비스를 시작해주세요"})]}),(0,a.jsx)(d,{onClick:ej,size:"lg",className:"kiosk-button w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white shadow-lg hover:shadow-xl transition-all duration-300 py-4 sm:py-6 text-lg sm:text-xl font-semibold",children:"시작하기"})]})})}),"main"===s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x,{className:"glass-card",children:(0,a.jsx)(h,{className:"p-4 sm:p-6",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-100 to-green-200 p-4 sm:p-6 rounded-2xl border border-green-300/30",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(f.A,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600 mt-1 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-base sm:text-lg lg:text-xl font-medium text-gray-800 leading-relaxed mb-2",children:$}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[V&&(0,a.jsx)("div",{className:"text-sm sm:text-base text-green-700 flex items-center gap-2",children:V}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[$&&!ee&&(0,a.jsxs)(d,{onClick:()=>eN($),size:"sm",variant:"outline",className:"text-xs px-2 py-1 border-green-300 text-green-600 hover:bg-green-50 bg-transparent",children:[(0,a.jsx)(f.A,{className:"w-3 h-3 mr-1"}),"다시 듣기"]}),ee&&(0,a.jsxs)(d,{onClick:ef,size:"sm",variant:"outline",className:"text-xs px-2 py-1 border-red-300 text-red-600 hover:bg-red-50 bg-transparent",children:[(0,a.jsx)(w.A,{className:"w-3 h-3 mr-1"}),"음성 중지"]})]})]})]})]})})})}),(0,a.jsx)(x,{className:"glass-card",children:(0,a.jsxs)(h,{className:"p-4 sm:p-6",children:[(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-4 text-center",children:"이용 가능한 서비스"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:gap-4",children:[(0,a.jsxs)(d,{onClick:()=>ev("reception"),disabled:J,size:"lg",className:"kiosk-button h-14 sm:h-16 bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 text-white shadow-lg hover:shadow-xl transition-all duration-300",children:[(0,a.jsx)(j.A,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-3"}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:"text-base sm:text-lg font-semibold",children:"접수"}),(0,a.jsx)("div",{className:"text-xs sm:text-sm opacity-90",children:"진료 접수 및 예약"})]})]}),(0,a.jsxs)(d,{onClick:()=>ev("lookup"),disabled:J,size:"lg",className:"kiosk-button h-14 sm:h-16 bg-gradient-to-r from-teal-600 to-teal-700 hover:from-teal-700 hover:to-teal-800 text-white shadow-lg hover:shadow-xl transition-all duration-300",children:[(0,a.jsx)(N.A,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-3"}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:"text-base sm:text-lg font-semibold",children:"접수내역 확인"}),(0,a.jsx)("div",{className:"text-xs sm:text-sm opacity-90",children:"예약 현황 및 대기시간"})]})]}),(0,a.jsxs)(d,{onClick:()=>ev("direction"),disabled:J,size:"lg",className:"kiosk-button h-14 sm:h-16 bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-700 hover:to-amber-800 text-white shadow-lg hover:shadow-xl transition-all duration-300",children:[(0,a.jsx)(v.A,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-3"}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:"text-base sm:text-lg font-semibold",children:"길찾기"}),(0,a.jsx)("div",{className:"text-xs sm:text-sm opacity-90",children:"병원 내 위치 안내"})]})]})]})]})}),(0,a.jsx)(x,{className:"glass-card",children:(0,a.jsxs)(h,{className:"p-4 sm:p-6",children:[(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-4 text-center",children:"음성으로 말씀해주세요"}),G?(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-red-700 font-medium",children:"녹음 중..."})]}),(0,a.jsxs)(d,{onClick:e_,size:"sm",className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 text-sm",children:[(0,a.jsx)(k.A,{className:"w-4 h-4 mr-1"}),"녹음 중지"]})]}),(0,a.jsx)("p",{className:"text-sm text-red-600 mt-2 text-center",children:"말씀하신 후 '녹음 중지' 버튼을 눌러주세요"})]}):(0,a.jsxs)(d,{onClick:ez,disabled:J,size:"lg",className:"kiosk-button w-full h-14 sm:h-16 text-base sm:text-lg bg-green-500 hover:bg-green-600 shadow-lg shadow-green-200 transition-all duration-300",children:[(0,a.jsx)(y.A,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-3"}),"\uD83C\uDFA4 음성 입력 시작"]})]})})]}),"service"===s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x,{className:"glass-card",children:(0,a.jsx)(h,{className:"p-4 sm:p-6",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-100 to-green-200 p-4 sm:p-6 rounded-2xl border border-green-300/30",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(f.A,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600 mt-1 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-base sm:text-lg lg:text-xl font-medium text-gray-800 leading-relaxed mb-2",children:$}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[V&&(0,a.jsx)("div",{className:"text-sm sm:text-base text-green-700 flex items-center gap-2",children:V}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[$&&!ee&&(0,a.jsxs)(d,{onClick:()=>eN($),size:"sm",variant:"outline",className:"text-xs px-2 py-1 border-green-300 text-green-600 hover:bg-green-50 bg-transparent",children:[(0,a.jsx)(f.A,{className:"w-3 h-3 mr-1"}),"다시 듣기"]}),ee&&(0,a.jsxs)(d,{onClick:ef,size:"sm",variant:"outline",className:"text-xs px-2 py-1 border-red-300 text-red-600 hover:bg-red-50 bg-transparent",children:[(0,a.jsx)(w.A,{className:"w-3 h-3 mr-1"}),"음성 중지"]})]})]})]})]})})})}),(0,a.jsx)(x,{className:"glass-card",children:(0,a.jsxs)(h,{className:"p-4 sm:p-6",children:[(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-4 text-center",children:"음성으로 답변해주세요"}),G?(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-red-700 font-medium",children:"녹음 중..."})]}),(0,a.jsxs)(d,{onClick:e_,size:"sm",className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 text-sm",children:[(0,a.jsx)(k.A,{className:"w-4 h-4 mr-1"}),"녹음 중지"]})]}),(0,a.jsx)("p",{className:"text-sm text-red-600 mt-2 text-center",children:"말씀하신 후 '녹음 중지' 버튼을 눌러주세요"})]}):(0,a.jsxs)(d,{onClick:ez,disabled:J,size:"lg",className:"kiosk-button w-full h-14 sm:h-16 text-base sm:text-lg bg-green-500 hover:bg-green-600 shadow-lg shadow-green-200 transition-all duration-300",children:[(0,a.jsx)(y.A,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-3"}),"\uD83C\uDFA4 음성 입력 시작"]})]})}),(W||ex)&&(0,a.jsx)(x,{className:"glass-card",children:(0,a.jsxs)(h,{className:"p-4 sm:p-6 space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-800",children:"처리 결과"}),W&&(0,a.jsxs)("div",{className:"bg-blue-50/80 p-3 sm:p-4 rounded-xl border border-blue-200/50",children:[(0,a.jsx)("h4",{className:"text-sm sm:text-base font-bold text-blue-800 mb-2",children:"음성 인식 결과"}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-700",children:W})]}),ex&&(0,a.jsxs)("div",{className:"bg-purple-50/80 p-3 sm:p-4 rounded-xl border border-purple-200/50",children:[(0,a.jsx)("h4",{className:"text-sm sm:text-base font-bold text-purple-800 mb-2",children:"AI 응답"}),(0,a.jsxs)("div",{className:"text-sm sm:text-base text-gray-700 leading-relaxed bg-white/70 rounded-lg p-3 sm:p-4 border border-purple-100",children:[(0,a.jsxs)("p",{className:"subtitle-text",children:[ex,B&&eu<B.length&&(0,a.jsx)("span",{className:"inline-block w-2 h-4 ml-1 bg-purple-400 animate-pulse"})]}),B&&eu<B.length&&(0,a.jsx)("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-1.5",children:(0,a.jsx)("div",{className:"bg-purple-500 h-1.5 rounded-full transition-all duration-300",style:{width:"".concat(eu/B.length*100,"%")}})})]})]})]})}),M&&(0,a.jsx)(x,{className:"glass-card",children:(0,a.jsxs)(h,{className:"p-4 sm:p-6",children:[(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-4",children:"접수 완료"}),(0,a.jsx)("div",{className:"bg-green-50/80 p-4 rounded-xl border border-green-200/50",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{className:"text-base sm:text-lg",children:[(0,a.jsx)("strong",{children:"환자명:"})," ",R.name]}),(0,a.jsxs)("p",{className:"text-base sm:text-lg",children:[(0,a.jsx)("strong",{children:"진료과:"})," ",M.dept]}),(0,a.jsxs)("p",{className:"text-base sm:text-lg",children:[(0,a.jsx)("strong",{children:"접수일:"})," ",M.date]}),(0,a.jsxs)("p",{className:"text-base sm:text-lg",children:[(0,a.jsx)("strong",{children:"예약시간:"})," ",M.time]})]})})]})})]})]}),(0,a.jsxs)("div",{className:"bg-white/90 backdrop-blur-md border-t border-green-200/50 p-3 sm:p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:["service"===s&&(0,a.jsxs)(d,{onClick:()=>{ef(),t("main"),n(null),c(null),q("원하시는 서비스를 선택하거나 음성으로 말씀해주세요.")},variant:"outline",size:"sm",className:"text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2 border border-green-300 hover:bg-green-50 bg-transparent",children:[(0,a.jsx)(T.A,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),"이전"]}),("main"===s||"service"===s)&&(0,a.jsxs)(d,{onClick:eE,variant:"outline",size:"sm",className:"text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2 border border-green-300 hover:bg-green-50 bg-transparent",children:[(0,a.jsx)(S.A,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),"처음으로"]}),("main"===s||"service"===s)&&(0,a.jsxs)(d,{onClick:()=>{ef(),t("start"),n(null),c(null),L("대기 중"),U(!1),H(""),Q(""),X(""),eh(""),ea(0),el(0),z({name:"",phone:"",address:"",symptom:""}),P({name:"",phone:""}),E(""),F(null),q("화면을 눌러 서비스를 시작해주세요")},variant:"outline",size:"sm",className:"text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2 border border-orange-300 hover:bg-orange-50 bg-transparent text-orange-600",children:[(0,a.jsx)(T.A,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),"시작화면"]}),("start"===s||"main"===s||"service"===s)&&(0,a.jsxs)(d,{onClick:()=>{ef(),t("modeSelect"),m(null),n(null),c(null),L("대기 중"),U(!1),H(""),Q(""),X(""),eh(""),ea(0),el(0),z({name:"",phone:"",address:"",symptom:""}),P({name:"",phone:""}),E(""),F(null),q("원하시는 모드를 선택해주세요")},variant:"outline",size:"sm",className:"text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2 border border-purple-300 hover:bg-purple-50 bg-transparent text-purple-600",children:[(0,a.jsx)(g.A,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),"모드변경"]}),(0,a.jsxs)("div",{className:"text-xs sm:text-sm text-gray-600 text-center flex-1 mx-2 sm:mx-4",children:["상태: ",I,J&&(0,a.jsx)("span",{className:"ml-2 animate-bounce",children:"⏳"})]}),(0,a.jsxs)(d,{onClick:()=>{ef(),q("직원을 호출하겠습니다. 잠시만 기다려주세요."),eN("직원을 호출하겠습니다. 잠시만 기다려주세요.")},variant:"outline",size:"sm",className:"text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2 border border-red-300 hover:bg-red-50 text-red-600",children:[(0,a.jsx)(A.A,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),"직원호출"]})]}),!1===o&&(0,a.jsx)("div",{className:"flex justify-center space-x-3 sm:space-x-4",children:[{key:"stt",label:"STT",status:Y.stt},{key:"llm",label:"LLM",status:Y.llm},{key:"tts",label:"TTS",status:Y.tts}].map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[e.status?(0,a.jsx)(C.A,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-600"}):(0,a.jsx)(D.A,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-500"}),(0,a.jsx)("span",{className:"text-xs text-gray-600",children:e.label})]},e.key))})]}),(0,a.jsx)("audio",{ref:eo,style:{display:"none"}})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[120,441,684,358],()=>s(6134)),_N_E=e.O()}]);